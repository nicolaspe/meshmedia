<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Unglitch - Mesh Media</title>

		<link rel="stylesheet" href="css/style.css">
		<script type="text/javascript" src="lib/jquery-3.3.1.min.js"></script>
		<script src="index.js"></script>
	</head>
	<body>
		<header>
			<span id="community">
				Unglitch Mesh Media
			</span>
			<span id="date"> </span>
		</header>
		<br><br><br><br><br>
		<div class="content button">
			<button type="button" id="join" class="play_button">Join Show</button>
		</div>

		<br>

		<div class="content" id="video_div">
		</div>

		<div class="content calendar" id="calendar">
			<div style="font-weight: normal; font-variant: all-small-caps; font-size:1.5em">
				Upcoming events
			</div>
			<div class="cal_col" id="t0"></div>
			<div class="cal_col" id="t1"></div>
			<div class="cal_col" id="t2"></div>
			<div class="cal_col" id="t3"></div>
			<div class="cal_col" id="t4"></div>
			<div class="cal_col" id="t5"></div>
			<div class="cal_col" id="t6"></div>
		</div>

	</body>

<script type="text/javascript">
	
	let clicked = false; 
	let button = document.getElementById('join');
	console.log(clicked);

	button.addEventListener('click', function(evt) {
	
		if (clicked == false) {
			let cal = document.getElementById('calendar');
			cal.style.visibility = "hidden";

			//create video
			let src = window.location.protocol + "//" + window.location.host + "/video";
			let ss = document.createElement("SOURCE");
			ss.type = "video/mp4";
			ss.src = src;

			let video = document.createElement("video");
			video.id = "videoPlayer";
			video.height = "480";
			video.autoplay = "autoplay";
			video.appendChild(ss);

			document.querySelector("#video_div").appendChild(video);
			button.innerText = "Quit Show";

			clicked = true; 

		} else if (clicked == true) {
			let video = document.getElementById("videoPlayer");
			document.querySelector("#video_div").removeChild(video);
			button.innerText = "Join Show";
			let cal = document.getElementById('calendar');
			cal.style.visibility = "visible";

			clicked = false;
		}
	});




	function hideCal() {
		let button = document.getElementById("join");
		let boo = button.getAttribute("boo");

		if (boo == "false") {
			//hide calender
			let cal = document.getElementById('calendar');
			cal.style.visibility = "hidden";

			//create video
			let src = window.location.protocol + "//" + window.location.host + "/video";
			let ss = document.createElement("SOURCE");
			ss.type = "video/mp4";
			ss.src = src;

			let video = document.createElement("video");
			video.id = "videoPlayer";
			video.height = "480";
			video.autoplay = "autoplay";
			video.appendChild(ss);

			document.querySelector("#video_div").appendChild(video);
			button.innerText = "Quit Show";
			// button.setAttribute("boo", "true");
			console.log(boo);
		} 

		if (boo == "true") {
			let video = document.getElementById("videoPlayer");
			document.querySelector("#video_div").removeChild(video);
			button.innerText = "Join Show";

		}

	}



</script>
</html>
